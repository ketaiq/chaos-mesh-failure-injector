apiVersion: chaos-mesh.org/v1alpha1
kind: Workflow
metadata:
  namespace: alms
  name: linear-cpu-stress
spec:
  entry: entry
  templates:
  - name: entry
    templateType: Serial
    deadline: 11h40m
    children:
    - suspending1
    - suspending2
    - suspending3
    - suspending4
    - suspending5
    - suspending6
    - suspending7
    - suspending8
    - suspending9
    - suspending10
    - 2percent-cpu
    - 4percent-cpu
    - 6percent-cpu
    - 8percent-cpu
    - 10percent-cpu
    - 12percent-cpu
    - 14percent-cpu
    - 16percent-cpu
    - 18percent-cpu
    - 20percent-cpu
    - 22percent-cpu
    - 24percent-cpu
    - 26percent-cpu
    - 28percent-cpu
    - 30percent-cpu
    - 32percent-cpu
    - 34percent-cpu
    - 36percent-cpu
    - 38percent-cpu
    - 40percent-cpu
    - 42percent-cpu
    - 44percent-cpu
    - 46percent-cpu
    - 48percent-cpu
    - 50percent-cpu
    - 52percent-cpu
    - 54percent-cpu
    - 56percent-cpu
    - 58percent-cpu
    - 60percent-cpu
    - 62percent-cpu
    - 64percent-cpu
    - 66percent-cpu
    - 68percent-cpu
    - 70percent-cpu
    - 72percent-cpu
    - 74percent-cpu
    - 76percent-cpu
    - 78percent-cpu
    - 80percent-cpu
    - 82percent-cpu
    - 84percent-cpu
    - 86percent-cpu
    - 88percent-cpu
    - 90percent-cpu
    - 92percent-cpu
    - 94percent-cpu
    - 96percent-cpu
    - 98percent-cpu
    - 100percent-cpu
  - name: suspending1
    templateType: Suspend
    deadline: 1h
  - name: suspending2
    templateType: Suspend
    deadline: 1h
  - name: suspending3
    templateType: Suspend
    deadline: 1h
  - name: suspending4
    templateType: Suspend
    deadline: 1h
  - name: suspending5
    templateType: Suspend
    deadline: 1h
  - name: suspending6
    templateType: Suspend
    deadline: 1h
  - name: suspending7
    templateType: Suspend
    deadline: 1h
  - name: suspending8
    templateType: Suspend
    deadline: 1h
  - name: suspending9
    templateType: Suspend
    deadline: 1h
  - name: suspending10
    templateType: Suspend
    deadline: 10m
  - name: 2percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 2
          load: 1
  - name: 4percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 4
          load: 1
  - name: 6percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 6
          load: 1
  - name: 8percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 8
          load: 1
  - name: 10percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 10
          load: 1
  - name: 12percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 12
          load: 1
  - name: 14percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 14
          load: 1
  - name: 16percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 16
          load: 1
  - name: 18percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 18
          load: 1
  - name: 20percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 20
          load: 1
  - name: 22percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 22
          load: 1
  - name: 24percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 24
          load: 1
  - name: 26percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 26
          load: 1
  - name: 28percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 28
          load: 1
  - name: 30percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 30
          load: 1
  - name: 32percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 32
          load: 1
  - name: 34percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 34
          load: 1
  - name: 36percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 36
          load: 1
  - name: 38percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 38
          load: 1
  - name: 40percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 40
          load: 1
  - name: 42percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 42
          load: 1
  - name: 44percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 44
          load: 1
  - name: 46percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 46
          load: 1
  - name: 48percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 48
          load: 1
  - name: 50percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 50
          load: 1
  - name: 52percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 52
          load: 1
  - name: 54percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 54
          load: 1
  - name: 56percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 56
          load: 1
  - name: 58percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 58
          load: 1
  - name: 60percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 60
          load: 1
  - name: 62percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 62
          load: 1
  - name: 64percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 64
          load: 1
  - name: 66percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 66
          load: 1
  - name: 68percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 68
          load: 1
  - name: 70percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 70
          load: 1
  - name: 72percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 72
          load: 1
  - name: 74percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 74
          load: 1
  - name: 76percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 76
          load: 1
  - name: 78percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 78
          load: 1
  - name: 80percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 80
          load: 1
  - name: 82percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 82
          load: 1
  - name: 84percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 84
          load: 1
  - name: 86percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 86
          load: 1
  - name: 88percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 88
          load: 1
  - name: 90percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 90
          load: 1
  - name: 92percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 92
          load: 1
  - name: 94percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 94
          load: 1
  - name: 96percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 96
          load: 1
  - name: 98percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 98
          load: 1
  - name: 100percent-cpu
    templateType: StressChaos
    deadline: 3m
    stressChaos:
      selector:
        namespaces:
        - alms
        labelSelectors:
          app.kubernetes.io/name: identity
        podPhaseSelectors:
        - Running
      mode: all
      stressors:
        cpu:
          workers: 100
          load: 1
